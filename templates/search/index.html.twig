{% extends 'base.html.twig' %}

{% block title %}Recherche
{% endblock %}

{% block body %}
	<div class="container mt-4">
		<div class="row">
			<div class="col-md-8 mx-auto">
				<h1>Recherche</h1>

				<form action="{{ path('app_search') }}" method="get" class="mb-4">
					<div class="input-group">
						<input type="text" name="q" class="form-control" value="{{ query }}" placeholder="Rechercher des articles...">
						<button class="btn btn-primary" type="submit">
							Rechercher
						</button>
					</div>
				</form>

				{% if query %}
					<h2>Résultats pour "{{ query }}"</h2>

					{% if articles is empty %}
						<p>Aucun résultat trouvé.</p>
					{% else %}
						<div class="row">
							{% for article in articles %}
								<div class="col-md-6 mb-4">
									<div class="card h-100">
										<div class="card-body">
											<h5 class="card-title">{{ article.title }}</h5>
											<p class="card-text">
												{{ article.content|slice(0, 150) }}
												{% if article.content|length > 150 %}...
												{% endif %}
											</p>
										</div>
										<div class="card-footer">
											<small class="text-muted">
												Par
												{{ article.author.username }}
												le
												{{ article.createdAt|date('d/m/Y') }}
											</small>
											<a href="{{ path('app_article_show', {'id': article.id}) }}" class="btn btn-sm btn-primary float-end">
												Lire la suite
											</a>
										</div>
									</div>
								</div>
							{% endfor %}
						</div>
					{% endif %}
				{% endif %}
			</div>
		</div>
	</div>
{% endblock %}
